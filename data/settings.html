<form method="post" action="/settings">
        <fieldset>
                <legend>BMS pairing:</legend>
                <p>Serial of the currently hooked up BMS:</p>
                <p><b>%BMS_CURRENT_SERIAL%</b></p>
                <hr>
                <p>Override the BMS serial:<input placeholder="Last 6 digits of the BMS your controller is paried with"
                                value="%BMS_SERIAL_OVERRIDE%" name="bs"></p>
        </fieldset>
        <fieldset>
                <legend>WiFi options:</legend>
                <p>Owie WiFi network name:<br><input placeholder="WiFi network name" value="%AP_SELF_NAME%"
                                name="apselfname"></p>
                <p>Password:<br><input placeholder="Between 8 and 32 characters" value="%AP_PASSWORD%" name="pw"></p>
                <p>Power (dBm):<br>
                        <select value="%WIFI_POWER%" name="wifipower">
                                %WIFI_POWER_OPTIONS%
                        </select>
        </fieldset>
        <button>Save</button>
</form>
<p id="btnField" style="display: none">
  <button onclick="toggleArming(this)" id="armBtn">
    %BOARD_LOCK_ARMED_INV%
  </button>
</p>
<script>
  function toggleArming(armBtn) {
    let xhr = new XMLHttpRequest();
    xhr.open("GET", "/lock?toggleArm");
    xhr.resposeType = "text";

    xhr.onload = () => {
      if (xhr.readyState === xhr.DONE) {
        if (xhr.status === 200) {
          armBtn.innerHTML = xhr.responseText;
        } else {
          armBtn.innerHTML = "Error: " + xhr.status;
        }
      }
    };

    xhr.send();
  }

  if ("%AP_PASSWORD%" !== "") {
    document.getElementById("btnField").style.display = "block";
  }
</script>
